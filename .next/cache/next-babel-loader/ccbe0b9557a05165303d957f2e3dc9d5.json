{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport React, { useState, useContext, useEffect } from 'react';\nimport Layout from '../../components/Layout';\nimport clientAxios from '../../config/axios';\nimport appContext from '../../context/app/appContext';\nimport authContext from '../../context/auth/authContext';\nimport Alerta from '../../components/Alerta';\nexport var __N_SSP = true;\nexport function getServerSidePaths() {\n  return _getServerSidePaths.apply(this, arguments);\n}\n\nfunction _getServerSidePaths() {\n  _getServerSidePaths = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var links;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return clientAxios.get('/api/links/');\n\n          case 2:\n            links = _context2.sent;\n            return _context2.abrupt(\"return\", {\n              paths: links.data.links.map(function (link) {\n                return {\n                  params: {\n                    link: link.url\n                  }\n                };\n              }),\n              fallback: false\n            });\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _getServerSidePaths.apply(this, arguments);\n}\n\nvar Link = function Link(_ref) {\n  var link = _ref.link;\n  var AppContext = useContext(appContext);\n  var mensaje_archivo = AppContext.mensaje_archivo,\n      mostrarAlerta = AppContext.mostrarAlerta;\n  var AuthContext = useContext(authContext);\n  var token = AuthContext.token,\n      usuarioAutenticado = AuthContext.usuarioAutenticado;\n\n  var _useState = useState(link.password),\n      tienePassword = _useState[0],\n      setTienePassword = _useState[1];\n\n  var _useState2 = useState(''),\n      password = _useState2[0],\n      setPassword = _useState2[1];\n\n  var _useState3 = useState(link.file),\n      fileLink = _useState3[0],\n      setFileLink = _useState3[1];\n\n  var _useState4 = useState({\n    original_name: '',\n    image: ''\n  }),\n      file = _useState4[0],\n      setFile = _useState4[1];\n\n  var verificarPassword = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var data, resultado;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              data = {\n                password: password\n              };\n              _context.prev = 2;\n              _context.next = 5;\n              return clientAxios.post(\"/api/links/\".concat(link.link), data);\n\n            case 5:\n              resultado = _context.sent;\n              setTienePassword(resultado.data.password);\n              setFileLink(resultado.data.file);\n              _context.next = 13;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](2);\n              mostrarAlerta(_context.t0.response.data.msg);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 10]]);\n    }));\n\n    return function verificarPassword(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    if (token) {\n      usuarioAutenticado();\n    }\n  }, [token]);\n  return __jsx(Layout, null, tienePassword ? __jsx(React.Fragment, null, mensaje_archivo && __jsx(Alerta, null), __jsx(\"div\", {\n    className: \"flex justify-center mt-5\"\n  }, __jsx(\"div\", {\n    className: \"w-full max-w-lg\"\n  }, __jsx(\"form\", {\n    className: \"bg-white rounded shadow-md px-8 pt-6 pb-8 mb-4\",\n    onSubmit: function onSubmit(e) {\n      return verificarPassword(e);\n    }\n  }, __jsx(\"div\", {\n    className: \"mb-4\"\n  }, __jsx(\"label\", {\n    className: \"block text-black text-sm font-bold mb-2\",\n    htmlFor: \"password\"\n  }, \"Ingresa la contrase\\xF1a del archivo\"), __jsx(\"input\", {\n    type: \"password\",\n    className: \"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",\n    id: \"password\",\n    value: password,\n    onChange: function onChange(e) {\n      return setPassword(e.target.value);\n    },\n    placeholder: \"\\u25CF\\u25CF\\u25CF\\u25CF\\u25CF\"\n  }), __jsx(\"input\", {\n    type: \"submit\",\n    className: \"bg-red-500 hover:bg-gray-900 w-full p-2 text-white uppercase font-bold\\r mt-2\",\n    value: \"Validar Password\"\n  })))))) : __jsx(React.Fragment, null, __jsx(\"img\", {\n    src: link.image,\n    className: \"mx-auto\"\n  }), __jsx(\"h1\", {\n    className: \"mt-5 text-4xl text-center text-gray-700 break-all\"\n  }, link.original_name, \" \"), __jsx(\"div\", {\n    className: \"flex items-center justify-center mt-10\"\n  }, __jsx(\"a\", {\n    href: \"\".concat(process.env.backendURL, \"/api/files/\").concat(fileLink),\n    className: \"bg-red-500 text-center px-10 py-3 rounded uppercase font-bold text-white cursor-pointer\",\n    download: true\n  }, \"Descargar\"))));\n};\n\nexport default Link;","map":null,"metadata":{},"sourceType":"module"}